<div class="container mx-auto p-4">
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold text-white">Contacts</h1>
    <button (click)="addContact()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
      Add Contact
    </button>
  </div>

  @if (loading) {
  <div class="flex justify-center items-center">
    <div class="spinner border-4 border-t-4 border-gray-200 border-t-blue-500 rounded-full w-12 h-12 animate-spin"></div>
  </div>

  }

  @if (error) {
  <div class="bg-red-500 text-white p-4 rounded mb-4">
    {{ error }}
  </div>
  }

  @if (!loading && !error) {
  <div class="overflow-x-auto">
  @if (contacts.length > 0) {
    <table class="min-w-full bg-gray-800 text-white">
      <thead>
        <tr class="bg-gray-700">
          <th class="py-2 px-4 border-b border-gray-600">
            <fa-icon [icon]="faUser" class="mr-1" />
            <span>Name</span>
          </th>
          <th class="py-2 px-4 border-b border-gray-600">
            <fa-icon [icon]="faEnvelope" class="mr-1" />
            <span>Email</span>
          </th>
          <th class="py-2 px-4 border-b border-gray-600">
           <fa-icon [icon]="faPhone" class="mr-1" />
            <span>Phone</span>
          </th>
          <th class="py-2 px-4 border-b border-gray-600">Actions</th>
        </tr>
      </thead>
      <tbody>
      @for (contact of contacts; track contact.phone){
        <tr class="hover:bg-gray-700">
          <td class="py-2 px-4 border-b border-gray-600 text-center">{{ contact.name }}</td>
          <td class="py-2 px-4 border-b border-gray-600 text-center">{{ contact.email }}</td>
          <td class="py-2 px-4 border-b border-gray-600 text-center">{{ contact.phone }}</td>
          <td class="py-2 px-4 border-b border-gray-600 text-center">
            <button (click)="editContact(contact)" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded mr-2">
                <fa-icon [icon]="faEdit"/>
            </button>
            <button (click)="deleteContact(contact)" class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded">
                <fa-icon [icon]="faTrash"/>
            </button>
          </td>
        </tr>
      }
      </tbody>
    </table>
  } @else {
      <p class="text-white text-center">No contacts found.</p>
  }
  </div>
  }
</div>

@if (showForm) {
      <app-contact-form
        [contact]="selectedContact"
        (save)="onSave($event)"
        (close)="onClose()"
      ></app-contact-form>
}

@if (showConfirmation) {
<app-confirmation-dialog
  message="Are you sure you want to delete this contact?"
  (confirm)="onConfirmDelete()"
  (cancel)="onCancelDelete()"
></app-confirmation-dialog>
}
